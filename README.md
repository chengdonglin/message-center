

## 消息中台


### 背景

业务系统中经常需要发送可靠性延迟消息,比如订单超时关闭，延迟提醒类的消息等。通常我们会采用以下几种方案来实现：

1. MySQL + job 定时轮询方案

轮询数据库查询需要处理的消息，频繁访问数据，DB数据库压力大

2. RabbitMQ 延时插件

依赖中间件

3. RocketMQ

依赖中间件，延迟时间有限制

依赖中间件实现也一种稳定可靠的方案，但是我们经常存在一种情况，消息的体量并不大，同时不希望引入其他的中间件增加系统的复杂度，同时在给B端部署的时候， 越简单越方便，那么基于我们基于此，我们采用以下方案:

4. MySQL + job 定时轮询 + DelayQueue

方案的有点是不依赖中间件，job 采用2分钟执行一次，每次拉取未来5分钟内需要处理的消息，放到Java DeleyQueue 延时工具类，这样也可以做到实时性高，对DB的压力也不大，后续也可以直接接入MQ，直接实时投递MQ， 具备非常高的扩展性



